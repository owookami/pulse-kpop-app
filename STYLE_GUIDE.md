# Pulse 스타일 가이드

이 문서는 Pulse 프로젝트의 코드 스타일과 개발 관행에 대한 가이드라인을 제공합니다.

## 목차

1. [일반 가이드라인](#일반-가이드라인)
2. [코드 스타일](#코드-스타일)
3. [파일 구조](#파일-구조)
4. [네이밍 컨벤션](#네이밍-컨벤션)
5. [Riverpod 사용 가이드](#riverpod-사용-가이드)
6. [테스트 가이드](#테스트-가이드)
7. [문서화 가이드](#문서화-가이드)
8. [성능 최적화](#성능-최적화)

## 일반 가이드라인

- **코드 리뷰**: 모든 코드 변경은 PR을 통해 최소 한 명의 다른 개발자가 검토해야 합니다.
- **기능 브랜치**: 새로운 기능은 별도의 브랜치에서 개발해야 합니다.
- **커밋 메시지**: 커밋 메시지는 명확하고 간결해야 하며, 변경 사항을 설명해야 합니다.
- **자체 리뷰**: PR을 제출하기 전에 코드를 자체적으로 리뷰하고 불필요한 변경 사항이나 디버그 코드를 제거하세요.

## 코드 스타일

- **린트 규칙 준수**: `analysis_options.yaml`에 정의된 린트 규칙을 따릅니다.
- **const 사용**: 가능한 경우 `const` 생성자를 사용합니다.
- **async/await**: 비동기 코드는 `async`/`await` 구문을 사용하여 가독성을 높입니다.
- **파이널 변수**: 기본적으로 변경되지 않는 변수는 `final`을 사용합니다.
- **코드 포맷팅**: Dart 포맷터를 사용하여 100자 길이 제한을 준수합니다.
- **문자열**: 단일 인용부호(`'`)를 사용합니다. 문자열 템플릿이나 작은따옴표가 포함된 경우에만 쌍따옴표(`"`)를 사용합니다.

## 파일 구조

우리는 **Feature-first**와 **Clean Architecture** 원칙을 따릅니다:

```
lib/
  ├── core/            # 핵심 유틸리티 및 공통 기능
  ├── features/        # 앱의 주요 기능
  │    ├── auth/       # 인증 기능
  │    │    ├── data/        # 데이터 소스, 저장소 구현
  │    │    ├── domain/      # 엔티티, 유스케이스
  │    │    └── view/        # UI 계층
  │    └── feed/       # 피드 기능 (다른 기능도 비슷한 구조)
  └── main.dart        # 앱 진입점
```

## 네이밍 컨벤션

- **클래스명**: PascalCase (예: `UserRepository`, `FeedScreen`)
- **변수 및 메서드명**: camelCase (예: `userName`, `fetchData()`)
- **상수**: SCREAMING_SNAKE_CASE (예: `API_KEY`) 또는 kConstantName (예: `kDefaultPadding`)
- **privat 멤버**: 언더스코어로 시작 (예: `_privateVariable`)
- **파일명**: snake_case (예: `user_repository.dart`, `feed_screen.dart`)
- **Enum 값**: camelCase (예: `enum UserStatus { active, inactive, banned }`)

## Riverpod 사용 가이드

- **Provider 정의**: 가능한 경우 `@riverpod` 어노테이션을 사용합니다.
- **상태 관리 선호도**:
  1. `AsyncNotifierProvider` / `NotifierProvider` (클래스 기반)
  2. `Provider` (단순 값)
  3. 가능한 `StateProvider`와 `StateNotifierProvider` 사용을 피합니다.
- **Ref 사용**: `ref.watch`는 UI에서, `ref.read`는 이벤트 핸들러에서 주로 사용합니다.
- **Provider 스코프**: 가능한 작은 스코프에서 프로바이더를 정의합니다.

## 테스트 가이드

- **단위 테스트**: 모든 비즈니스 로직과 복잡한 함수는 단위 테스트가 있어야 합니다.
- **위젯 테스트**: 모든 주요 UI 컴포넌트는 위젯 테스트가 있어야 합니다.
- **통합 테스트**: 중요한 기능 흐름에 대한 통합 테스트를 구현하세요.
- **Mock 사용**: 외부 의존성은 `mockito`나 `mocktail`을 사용하여 모킹합니다.

## 문서화 가이드

- **API 문서**: 모든 공개 API(클래스, 메서드, 속성)는 다트독 주석이 있어야 합니다.
- **TODO 주석**: 임시 코드나 향후 개선 사항은 `// TODO:` 주석으로 표시합니다.
- **복잡한 로직**: 복잡한 로직이나 비직관적인 코드는 주석으로 설명합니다.

## 성능 최적화

- **빌더 패턴**: 긴 목록에는 `ListView.builder`를 사용합니다.
- **const 위젯**: 불변 위젯에는 `const` 생성자를 사용합니다.
- **메모이제이션**: 비싼 계산에는 `ref.watch`와 함께 memoization을 사용합니다.
- **비동기 작업 취소**: 위젯이 폐기될 때 비동기 작업을 취소합니다.
- **이미지 최적화**: 네트워크 이미지에는 `cached_network_image`를 사용합니다. 